<!DOCTYPE html>
<html>
<head>
  <title>Voice Stream Listener</title>
</head>
<body>
  <h2>👂 Listening to Mic...</h2>
  <p id="status">Connecting to stream...</p>

  <script>
    const status = document.getElementById("status");
    const socket = new WebSocket("wss://voice-stream-server2.onrender.com");

    socket.addEventListener("open", () => {
      status.innerText = "✅ Connected to stream";
      socket.send("listener");
    });

    socket.addEventListener("message", (event) => {
      const audioData = event.data;
      const blob = new Blob([audioData], { type: "audio/webm" });
      const audio = new Audio();
      audio.src = URL.createObjectURL(blob);
      audio.play();
    });

    socket.addEventListener("close", () => {
      status.innerText = "❌ Disconnected from stream";
    });

    socket.addEventListener("error", () => {
      status.innerText = "⚠️ Stream error";
    });
  </script>
</body>
</html>
